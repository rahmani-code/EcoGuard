<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartBin Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body>
    <header class="topbar">
      <div class="brand">
        <div class="logo">üóëÔ∏è</div>
        <div>
          <div class="brand-name">SmartBin</div>
          <div class="brand-sub">Intelligent Waste Management</div>
        </div>
      </div>

      <div class="pill" id="onlinePill">
        <span class="dot"></span>
        <span id="onlineText">System Online</span>
      </div>
    </header>

    <main class="container">
      <!-- TOP METRICS -->
      <section class="cards">
        <div class="card metric">
          <div class="metric-head">
            <div class="icon">üìä</div>
            <div class="metric-title">System Status</div>
          </div>
          <div class="metric-value" id="systemStatusText">Operational</div>
          <div class="metric-sub" id="systemStatusSub">
            Bin operating normally
          </div>
        </div>

        <div class="card metric">
          <div class="metric-head">
            <div class="icon">üìè</div>
            <div class="metric-title">Fill Level</div>
          </div>
          <div class="metric-value">
            <span id="distanceCm">--</span> <span class="unit">cm</span>
          </div>
          <div class="metric-sub">Ultrasonic distance</div>
        </div>

        <div class="card metric">
          <div class="metric-head">
            <div class="icon">‚ôªÔ∏è</div>
            <div class="metric-title">Last Sorted</div>
          </div>
          <div class="metric-value" id="lastSorted">None</div>
          <div class="metric-sub">Latest category</div>
        </div>

        <div class="card metric">
          <div class="metric-head">
            <div class="icon">üì¶</div>
            <div class="metric-title">Total Sorted</div>
          </div>
          <div class="metric-value" id="totalSorted">0</div>
          <div class="metric-sub">All time</div>
        </div>
      </section>

      <!-- CAPACITY + MANUAL SORT -->
      <section class="grid-2">
        <div class="card capacity">
          <div class="cap-top">
            <div>
              <div class="cap-title">Bin Capacity</div>
              <div class="cap-sub">Real-time fill level monitoring</div>
            </div>
            <div class="cap-percent"><span id="fillPercent">0</span>%</div>
          </div>

          <div class="bar">
            <div class="bar-fill" id="barFill"></div>
          </div>

          <div class="bar-labels">
            <span>EMPTY</span>
            <span>FULL</span>
          </div>

          <div class="cap-foot">
            <div class="badge-status" id="statusBadge">OPERATIONAL</div>
            <div class="cap-foot-note">Updates every 20 seconds</div>
          </div>
        </div>

        <div class="card manual">
          <div class="manual-title">Manual Sort</div>
          <div class="manual-sub">
            Select waste type and send command to ESP32
          </div>

          <button class="primary" id="openSort">Sort Waste Now ‚Üí</button>

          <div class="manual-note">
            (For now: manual mode. Later: ESP32 receives command ‚Üí servo
            rotates.)
          </div>
        </div>
      </section>

      <!-- LOGS + CHART -->
      <section class="grid-2 tall">
        <div class="card">
          <div class="section-head">
            <div>
              <div class="section-title">Distance Sensor</div>
              <div class="section-sub">Current reading + recent history</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">Current</div>
              <div class="mini-value"><span id="distanceCm2">--</span> cm</div>
            </div>
          </div>

          <div class="chart-wrap">
            <canvas id="distanceChart"></canvas>
          </div>

          <div class="list-head">Recent Readings</div>
          <ul class="list" id="distanceLog"></ul>
        </div>

        <div class="card">
          <div class="section-head">
            <div>
              <div class="section-title">Sorting History</div>
              <div class="section-sub">
                Every manual sort action is recorded
              </div>
            </div>

            <div class="filters">
              <button class="chip active" data-filter="all">All</button>
              <button class="chip" data-filter="plastic">Plastic</button>
              <button class="chip" data-filter="paper">Paper</button>
              <button class="chip" data-filter="other">Other</button>
            </div>
          </div>

          <ul class="list" id="sortLog"></ul>
        </div>
      </section>
    </main>

    <!-- SORT MODAL -->
    <div class="modal" id="sortModal">
      <div class="modal-box">
        <div class="modal-top">
          <div>
            <div class="modal-title">Manual Sorting</div>
            <div class="modal-sub">Choose a category to send</div>
          </div>
          <button class="x" id="closeSort">‚úï</button>
        </div>

        <div class="modal-actions">
          <button class="opt plastic" data-type="plastic">Plastic</button>
          <button class="opt paper" data-type="paper">Paper</button>
          <button class="opt other" data-type="other">Other</button>
        </div>

        <div class="modal-foot" id="modalFoot">
          This will later call ESP32 (HTTP/MQTT). Currently logs locally.
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
